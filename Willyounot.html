<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            overflow: hidden; /* Prevent scrolling when buttons move */
            touch-action: manipulation;
        }
        h1, h2, .font-display {
            font-family: 'Fredoka One', cursive;
        }
        
        /* Smooth movement for buttons */
        .runaway-btn {
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: absolute; 
            /* Start with relative-like behavior via JS positioning or centering */
        }

        /* Floating hearts animation for background */
        .heart-bg {
            position: absolute;
            color: rgba(255, 182, 193, 0.3);
            animation: floatUp linear infinite;
            z-index: -1;
            user-select: none;
        }

        @keyframes floatUp {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
        }

        /* Confetti Canvas */
        #confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-100 via-red-50 to-pink-200 h-screen w-screen flex flex-col items-center justify-center relative select-none">

    <!-- Background Decoration -->
    <div id="hearts-container" class="absolute inset-0 overflow-hidden pointer-events-none"></div>

    <!-- Main Card -->
    <div id="main-card" class="bg-white/80 backdrop-blur-sm p-8 rounded-3xl shadow-xl border-4 border-white max-w-md w-full text-center transform transition-all duration-500 z-10 mx-4">
        
        <!-- Cute Animated SVG/Emoji Area -->
        <div class="mb-6 relative h-32 flex items-center justify-center">
            <div id="emoji-state" class="text-8xl filter drop-shadow-lg animate-bounce duration-[2000ms]">
                ðŸ¥º
            </div>
        </div>

        <h1 class="text-3xl md:text-4xl text-pink-600 mb-2 leading-tight">
            Will you be my Valentine?
        </h1>
        <p class="text-gray-600 mb-8 text-lg font-bold">Please? ðŸ‘‰ðŸ‘ˆ</p>

        <!-- Button Container (Relative for initial layout) -->
        <div class="relative h-20 w-full flex justify-center gap-4">
            <!-- Yes Button -->
            <button id="yesBtn" class="runaway-btn bg-green-500 hover:bg-green-600 text-white text-xl px-8 py-3 rounded-full font-display shadow-lg transform active:scale-95 border-b-4 border-green-700" style="left: 50%; transform: translateX(-110%);">
                YES
            </button>

            <!-- No Button -->
            <button id="noBtn" class="runaway-btn bg-red-500 hover:bg-red-600 text-white text-xl px-8 py-3 rounded-full font-display shadow-lg border-b-4 border-red-700" style="left: 50%; transform: translateX(10%);">
                NO
            </button>
        </div>
    </div>

    <!-- Success Message (Hidden Initially) -->
    <div id="success-msg" class="hidden fixed inset-0 flex flex-col items-center justify-center z-40 bg-white/90 backdrop-blur-md transition-opacity duration-1000 opacity-0">
        <div class="text-9xl mb-4 animate-bounce">ðŸ’–</div>
        <h1 class="text-5xl md:text-6xl text-pink-600 mb-4 text-center px-4">YAYYY!</h1>
        <p class="text-2xl text-gray-700 font-bold text-center px-8">
            I knew you'd give in eventually! <br>
            <span class="text-pink-500 text-sm mt-2 block">(Even if I made it hard)</span>
        </p>
        <p class="mt-8 text-lg text-gray-500">Screenshot this and send it to me! ðŸ“¸</p>
    </div>

    <canvas id="confetti"></canvas>

    <script>
        // Configuration
        const yesMovesRequired = 5;
        
        // State
        let yesMoves = 0;
        let yesButtonCaught = false;

        // Elements
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const mainCard = document.getElementById('main-card');
        const successMsg = document.getElementById('success-msg');
        const emojiState = document.getElementById('emoji-state');
        const heartsContainer = document.getElementById('hearts-container');

        // Funny texts for the Yes button as it runs away
        const yesTexts = [
            "YES", 
            "Too Slow!", 
            "Missed Me!", 
            "Catch Me!", 
            "Almost!", 
            "OK, I surrender! YES"
        ];

        // Emojis for the main face
        const emojis = ["ðŸ¥º", "ðŸ˜²", "ðŸ«£", "ðŸƒâ€â™‚ï¸", "ðŸ˜°", "ðŸ¥°"];

        // Initialize Button Positions strictly for JS control
        function initButtons() {
            // We initially let CSS place them, but once interaction starts, we switch to absolute fixed coordinates
            const cardRect = mainCard.getBoundingClientRect();
            // This is just a placeholder; the logic handles the "runaway" effect
        }

        // Helper: Get random position within safe bounds
        function getRandomPosition(element) {
            const padding = 20;
            const cardRect = mainCard.getBoundingClientRect();
            
            // Available width/height
            const maxX = window.innerWidth - element.offsetWidth - padding;
            const maxY = window.innerHeight - element.offsetHeight - padding;
            const minX = padding;
            const minY = padding;

            let newX = Math.random() * (maxX - minX) + minX;
            let newY = Math.random() * (maxY - minY) + minY;

            return { x: newX, y: newY };
        }

        function moveButton(btn) {
            const pos = getRandomPosition(btn);
            btn.style.position = 'fixed'; // Switch to fixed to break out of the container
            btn.style.left = `${pos.x}px`;
            btn.style.top = `${pos.y}px`;
            btn.style.transform = 'none'; // Remove the initial CSS centering transform
        }

        // --- NO BUTTON LOGIC ---
        // Runs away immediately on hover/touch
        const avoidInteraction = (e) => {
            moveButton(noBtn);
            emojiState.innerText = "ðŸ˜¢"; // Sad face when trying to click no
        };

        noBtn.addEventListener('mouseover', avoidInteraction);
        noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); avoidInteraction(); });
        noBtn.addEventListener('click', avoidInteraction); // Just in case they manage to click it

        // --- YES BUTTON LOGIC ---
        const handleYesInteraction = (e) => {
            if (yesButtonCaught) return;

            if (yesMoves < yesMovesRequired) {
                // RUN AWAY!
                if (e.type === 'touchstart') e.preventDefault(); // Prevent click on touch
                
                moveButton(yesBtn);
                yesMoves++;
                
                // Update text and emoji
                yesBtn.innerText = yesTexts[Math.min(yesMoves, yesTexts.length - 1)];
                emojiState.innerText = emojis[Math.min(yesMoves, emojis.length - 1)];
                
                // Change color to indicate difficulty
                if(yesMoves > 2) {
                    yesBtn.classList.remove('bg-green-500', 'hover:bg-green-600', 'border-green-700');
                    yesBtn.classList.add('bg-orange-500', 'hover:bg-orange-600', 'border-orange-700');
                }
            } else {
                // CAUGHT!
                yesButtonCaught = true;
                yesBtn.style.position = 'static'; // Snap back or stay put? Let's just update styles.
                yesBtn.style.transform = 'scale(1.1)';
                yesBtn.classList.remove('bg-orange-500', 'hover:bg-orange-600', 'border-orange-700');
                yesBtn.classList.add('bg-green-500', 'hover:bg-green-600', 'border-green-700');
                yesBtn.innerText = "YES (Finally!)";
                emojiState.innerText = "ðŸ¥³";
                
                // Ensure it's clickable now, remove listeners that move it
                yesBtn.removeEventListener('mouseover', handleYesInteraction);
                // We keep the click listener to trigger success
            }
        };

        yesBtn.addEventListener('mouseover', handleYesInteraction);
        
        // On mobile, touchstart acts as the "hover" to move it, unless it's caught
        yesBtn.addEventListener('touchstart', (e) => {
            if (!yesButtonCaught) {
                handleYesInteraction(e);
            }
        });

        yesBtn.addEventListener('click', () => {
            if (yesMoves >= yesMovesRequired || yesButtonCaught) {
                triggerSuccess();
            } else {
                // If they managed to click it super fast before hover triggered (rare on desktop)
                handleYesInteraction({type: 'click'});
            }
        });

        // --- SUCCESS LOGIC ---
        function triggerSuccess() {
            successMsg.classList.remove('hidden');
            // Small delay to allow display:block to apply before opacity transition
            setTimeout(() => {
                successMsg.classList.remove('opacity-0');
            }, 10);
            startConfetti();
        }

        // --- BACKGROUND HEARTS ---
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart-bg');
            heart.innerHTML = ['â¤ï¸', 'ðŸ’–', 'ðŸ’', 'ðŸ’•', 'ðŸ’—'][Math.floor(Math.random() * 5)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 3 + 2 + 's';
            heart.style.fontSize = Math.random() * 20 + 10 + 'px';
            heartsContainer.appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, 5000);
        }
        setInterval(createHeart, 300);

        // --- CONFETTI ENGINE (Simple Canvas) ---
        function startConfetti() {
            const canvas = document.getElementById('confetti');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            const particleCount = 150;
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];

            function Particle() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height - canvas.height;
                this.size = Math.random() * 5 + 5;
                this.speedY = Math.random() * 3 + 2;
                this.speedX = Math.random() * 2 - 1;
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.rotation = Math.random() * 360;
                this.rotationSpeed = Math.random() * 10 - 5;
            }

            Particle.prototype.update = function() {
                this.y += this.speedY;
                this.x += this.speedX;
                this.rotation += this.rotationSpeed;
                if (this.y > canvas.height) {
                    this.y = -10;
                    this.x = Math.random() * canvas.width;
                }
            };

            Particle.prototype.draw = function() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation * Math.PI / 180);
                ctx.fillStyle = this.color;
                ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
                ctx.restore();
            };

            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    p.update();
                    p.draw();
                });
                requestAnimationFrame(animate);
            }
            animate();
        }

        // Handle resize for canvas
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

    </script>
</body>
</html>